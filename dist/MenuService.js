!function(a){function b(a,b){this.name=a,this.element=angular.element(b),this.open=!1,this.attrs=[]}function c(){}function d(){this.eventModel={},this.listeners={}}var e=angular.module("Menu",[]),f=b.prototype;f.put=function(a){},f.remove=function(a){},f.toggle=function(a){};var f=c.prototype,f=d.prototype;f.register=function(a){if(a instanceof Object||(a=[a]),a instanceof Array)for(var b in a){var c=a[b];this.listeners[c]||(this.listeners[c]={})}else for(var c in a){var d=a[c];this.listeners[c]||(this.listeners[c]={}),this.eventModel[c]=d}return this},f.unregister=function(a){a instanceof Array||(a=[a]);for(var b=0;b<a.length;b++){var c=a[b];this.listeners[c]&&delete this.listeners[c],this.eventModel[c]&&delete this.eventModel[c]}return this},f.on=function(a,b,c){return(b||c)&&this.listeners[a]?(b&&c?b.$on("$destroy",function(){this.off(a,c)}):b&&!c&&(c=b),this.listeners[a].push(c),this):void 0},f.off=function(a,b){for(var c=this.listeners[a],d=0;d<c.length;d++)if(b===c[d]){c.splice(d,1);break}return this},f.event=function(a,b){var c=angular.merge({},this.eventModel[a],b);return c},f.dispatch=function(a,b,c){var d=this.listeners[a];if(c===!0)for(var e=0;e<d.length;e++)d[e](b);else setTimeout(function(){for(var a=0;a<d.length;a++)d[a](b)},c?c:0);return this},e.service("MenuService",[function(){var a={},c=null,e=new d,f={menu:null};e.register({put:f,remove:f});var g={get:function(b){return b?a[b]:c},put:function(c,d){if(!c||!d)return g;var f=a[c]=new b(c,d);return e.dispatch("put",e.event("put",{menu:f})),g},remove:function(b){var c=a[b];return delete a[b],e.dispatch("remove",e.event("remove",{menu:c})),g},setDefault:function(b){return c=a[b],g},on:function(a,b,c){return e.on(a,b,c),g},off:function(a,b){e.off(a,b)}};return g}]),e.directive("menuElement",["MenuService",function(a){return{restrict:"EA",scope:{menuElement:"@"},compile:function(){return{pre:function(b,c,d){var e=d.menuElement;if(!e)throw'You need to define a name for the menu with the "menu-element" attribute. This is required!';a.put(e,c),b.$on("$destroy",function(){a.remove(e)})}}}}}]),e.directive("menuPut",["MenuService",function(a){return{restrict:"A",priority:10,scope:{menuPut:"@"},compile:function(){return{pre:function(a,b,c){}}}}}]),e.directive("menuRef",[function(){return{priority:0,restrict:"A",bindToController:{menuRef:"@"},controller:function(){}}}]),e.directive("menuRemove",["MenuService",function(a){return{restrict:"A",priority:10,scope:{menuRemove:"@"},compile:function(){return{pre:function(a,b,c){}}}}}]),e.directive("menuSwitch",["MenuService",function(a){return{restrict:"A",priority:10,scope:{menuSwitch:"@"},require:["?menuRef"],link:function(b,c,d,e){var f=e[0]?e[0].menuRef:"",g=a.get(f);a.on("put",b,function(a){f===a.menu.name&&(g=a.menu)}),a.on("remove",b,function(a){f===a.menu.name&&(g=null)})}}}]),e.directive("menuToggle",["MenuService",function(a){return{restrict:"A",priority:10,scope:{menuToggle:"@"},compile:function(){return{pre:function(a,b,c){}}}}}])}(window);